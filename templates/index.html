<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AlokAi</title>
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3789654371558777"
     crossorigin="anonymous"></script>
</head>
<body>

<header>
  <h1>ðŸ”¥ AlokAi</h1>
  <nav>
    <a href="/">Home</a>
    <a href="/prompts-page">Prompts</a>

    <a href="/about">About</a>
    <a href="/privacy">Privacy Policy</a>
    <a href="/contactus">Contact Us</a>
  </nav>
</header>
<div class="search-bar">
  <input type="text" id="searchInput" placeholder="ðŸ” Search prompts...">
</div>
<div id="noResults" style="display:none; text-align:center; margin:1rem; color:#aaa;">
  ðŸš« No results found
</div>
<main>

  
  <div class="content">
    <h2>Latest Prompts</h2>
    <div id="prompt-grid" class="grid">
     
    </div>
   
  </div>

  <aside class="sidebar">
    <h3>Sponsored</h3>
    
     
    <div class="ad-box"></div>

  </aside>

  <!-- Anywhere in your HTML (header, main, footer) -->


</main>

<footer>
  <p>Â© 2025 AlokAi</p>
</footer>

<script>
  // Universal copy function
  function copyToClipboard(text) {
    if (navigator.clipboard && window.isSecureContext) {
      return navigator.clipboard.writeText(text);
    } else {
      return new Promise((resolve, reject) => {
        const textArea = document.createElement("textarea");
        textArea.value = text;
        textArea.style.position = "fixed";
        textArea.style.left = "-999999px";
        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();
        try {
          const successful = document.execCommand("copy");
          document.body.removeChild(textArea);
          successful ? resolve() : reject();
        } catch (err) {
          document.body.removeChild(textArea);
          reject(err);
        }
      });
    }
  }

  const API_URL = "/prompts";
  
  function loadPrompts() {
    fetch(API_URL)
      .then(res => res.json())
      .then(data => {
        const grid = document.getElementById("prompt-grid");
        grid.innerHTML = "";
        data.forEach(p => {
          const div = document.createElement("div");
          div.className = "card";
          div.innerHTML = `
            <img src="${p.photo}" alt="${p.title}">
            <h3>${p.title}</h3>
            <p>${p.description}</p>
            <p><b>Category:</b> ${p.category}</p>
            <button class="copy-btn"
              style="background:#00ffd5;color:#111;border:none;
                     padding:0.5rem 1rem;border-radius:8px;
                     cursor:pointer;font-weight:bold;margin:0.5rem 0;">
              ðŸ“‹ Copy
            </button>
            <button class="gemini-btn" style="
              background:#ff3cac;color:#fff;border:none;
              padding:0.5rem 1rem;border-radius:8px;
              cursor:pointer;font-weight:bold;margin:1rem 0;">
              Create Image
            </button>
            <div class="ad-container" style="display:none; margin-top:10px;"></div>
          `;

          // Gemini button
          div.querySelector(".gemini-btn").addEventListener("click", (e) => {
            e.stopPropagation();
            window.open("https://gemini.google.com/app", "_blank");
          });

          // âœ… Copy button (mobile compatible)
          div.querySelector(".copy-btn").addEventListener("click", (e) => {
            e.stopPropagation();
            copyToClipboard(p.description)
              .then(() => {
                e.target.innerText = "âœ… Copied!";
                setTimeout(() => e.target.innerText = "ðŸ“‹ Copy", 2000);
              })
              .catch(() => {
                alert("Copy not supported on this browser");
              });
          });
          function loadAds() {
    fetch("/ads")
        .then(res => res.json())
        .then(data => {
            const sidebar = document.querySelector(".sidebar");
            sidebar.innerHTML = `<h3>Advertisement</h3>`; // clear existing
            data.forEach(ad => {
                const adDiv = document.createElement("div");
                adDiv.className = "ad-box";
                adDiv.innerHTML = `
                    <img src="${ad.image}" alt="${ad.title}" style="width:100%; border-radius:12px;">
                    <h4>${ad.title}</h4>
                    <a href="${ad.amazon_link}" target="_blank">Buy on Amazon</a><br>
                    <iframe 
    width="100%" 
    height="200" 
    src="${ad.youtube_link}" 
    title="YouTube video" 
    frameborder="0" 
    allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
    allowfullscreen>
  </iframe>
                `;
                sidebar.appendChild(adDiv);
            });
        })
        .catch(err => console.error("Error loading ads:", err));
}

// Call after page load
loadAds();


          // Ad load on card click
          div.addEventListener("click", () => {
            const adContainer = div.querySelector(".ad-container");
            if (adContainer.innerHTML === "") {
              adContainer.innerHTML = `
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-XXXXXXX"
                     data-ad-slot="1111111111"
                     data-ad-format="auto"
                     data-full-width-responsive="true"></ins>
              `;
              (adsbygoogle = window.adsbygoogle || []).push({});
              adContainer.style.display = "block";
            }
          });

          grid.appendChild(div);
        });
      })
      .catch(err => console.error("Error fetching prompts:", err));
  }

  // Search logic
  const searchInput = document.getElementById("searchInput");
  const grid = document.getElementById("prompt-grid");
  const noResults = document.getElementById("noResults");

  searchInput.addEventListener("input", () => {
    const value = searchInput.value.toLowerCase();
    const cards = grid.querySelectorAll(".card");
    let visibleCount = 0;

    cards.forEach(card => {
      const text = card.innerText.toLowerCase();
      if (text.includes(value)) {
        card.style.display = "block";
        visibleCount++;
      } else {
        card.style.display = "none";
      }
    });

    noResults.style.display = (visibleCount === 0) ? "block" : "none";
  });

  // Load initial prompts
  loadPrompts();
</script>

  

</body>
</html>

